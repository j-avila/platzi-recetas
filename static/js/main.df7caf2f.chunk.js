(this["webpackJsonpplatzi-recetas"]=this["webpackJsonpplatzi-recetas"]||[]).push([[0],{23:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),a=n(15),c=n.n(a),s=(n(23),n(4)),o=n(5),u=n(7),l=n(6),d=n(38),j=n(37),h=n(39),p=n(3),f=n.n(p),b=n(8),m=n(11),v="https://www.themealdb.com/api/json/v2/9973533",O={getLatest:function(){return g.apply(this,arguments)},getRecipe:function(e){return x.apply(this,arguments)}};function g(){return(g=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/latest.php"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,r=n.meals.map((function(e){return w(e)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(b.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/lookup.php?i=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:if((r=e.sent).meals){e.next=8;break}return e.abrupt("return",null);case 8:return i=w(r.meals.shift()),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var t={};t.id=e.idMeal,t.name=e.strMeal,t.category=e.strCategory,t.origin=e.strArea,t.instructions=e.strInstructions.split("\n").filter((function(e){return""!==e.trim()})),t.thumbnail=e.strMealThumb,t.tags=e.strTags?e.strTags.split(","):[],t.youtube=e.strYoutube,t.ingredients=[],t.url=e.strSource,t.dateModified=e.dateModified;for(var n=1;n<=20;n++)""!==e["strIngredient".concat(n)]&&""!==e["strMeasure".concat(n)]&&t.ingredients.push({ingredient:e["strIngredient".concat(n)],measure:e["strMeasure".concat(n)]});return t}var k=n(0),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={recipes:null,isLoading:!0},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getLatest();case 3:t=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),t=null;case 10:this.setState({recipes:t,isLoading:!1});case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.recipes;return e.isLoading?Object(k.jsx)("div",{className:"message",children:"Cargando..."}):Object(k.jsxs)("div",{children:[Object(k.jsx)(m.Helmet,{children:Object(k.jsx)("title",{children:"Recetas"})}),Object(k.jsx)("div",{className:"recipes",children:t&&t.map((function(e){return Object(k.jsxs)(j.a,{to:"/recipe/".concat(e.id),className:"recipe",children:[Object(k.jsx)("span",{className:"bg",style:{backgroundImage:"url(".concat(e.thumbnail,")")}}),Object(k.jsx)("span",{className:"info",children:Object(k.jsx)("h2",{children:e.name})})]},e.id)}))})]})}}]),n}(i.a.Component),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.ingredients;return Object(k.jsxs)("div",{className:"ingredients",children:[Object(k.jsx)("h2",{children:"Ingredients"}),Object(k.jsx)("ul",{children:e.map((function(e,t){return Object(k.jsxs)("li",{children:[e.ingredient,": ",e.measure]},t)}))})]})}}]),n}(i.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.instructions;return Object(k.jsxs)("div",{className:"instructions",children:[Object(k.jsx)("h2",{children:"Instructions"}),Object(k.jsx)("div",{className:"steps",children:e.map((function(e,t){return Object(k.jsxs)("div",{className:"step",children:[Object(k.jsx)("div",{className:"number",children:t+1}),Object(k.jsx)("div",{className:"text",children:e})]},t)}))})]})}}]),n}(i.a.Component),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={recipe:null,isLoading:!0},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,O.getRecipe(this.props.match.params.recipeId);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=null;case 10:this.setState({recipe:t,isLoading:!1});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.recipe;return e.isLoading?Object(k.jsx)("div",{className:"message",children:"Cargando..."}):null===t?Object(k.jsx)("div",{className:"message",children:"Hubo un problema :("}):Object(k.jsxs)("div",{className:"Recipe",children:[Object(k.jsx)(m.Helmet,{children:Object(k.jsx)("title",{children:t.name})}),Object(k.jsx)("div",{className:"hero",style:{backgroundImage:"url(".concat(t.thumbnail,")")}}),Object(k.jsxs)("div",{className:"title",children:[Object(k.jsxs)("div",{className:"info",children:[Object(k.jsx)("h1",{children:t.name}),Object(k.jsx)("p",{children:t.origin})]}),Object(k.jsx)("div",{})]}),Object(k.jsx)(y,{ingredients:t.ingredients}),Object(k.jsx)(L,{instructions:t.instructions})]})}}]),n}(i.a.Component),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).start=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Notification"in window&&"serviceWorker"in navigator){e.next=2;break}return e.abrupt("return",alert("Tu browser no soporta notificaciones"));case 2:if("default"!==Notification.permission){e.next=5;break}return e.next=5,Notification.requestPermission();case 5:if("blocked"!==Notification.permission){e.next=7;break}return e.abrupt("return",alert("Bloqueaste las notificaciones :("));case 7:if("granted"===Notification.permission){e.next=9;break}return e.abrupt("return");case 9:t=r.state.timer,r.setState({timeLeft:t}),n=setInterval((function(){t-=1,r.setState({timeLeft:t}),t<=0&&(clearInterval(n),r.showNotification())}),1e3);case 12:case"end":return e.stop()}}),e)}))),r.showNotification=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",alert("No hay un Service Worker :("));case 5:t.showNotification("Listo el timer!",{body:"Ding ding ding",img:"/icon.png"});case 6:case"end":return e.stop()}}),e)}))),r.handleChange=function(e){r.setState({timer:e.target.value})},r.state={timer:3,timeLeft:0},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.timer,n=e.timeLeft;return Object(k.jsxs)("div",{className:"Timer",children:[Object(k.jsx)("div",{className:"name",children:"Timer"}),0===n?Object(k.jsxs)("div",{className:"center",children:[Object(k.jsx)("input",{type:"number",min:"0",max:"999",step:"1",value:t,onChange:this.handleChange}),Object(k.jsx)("button",{onClick:this.start,children:"Start"})]}):Object(k.jsxs)("div",{className:"timeLeft",children:[n,"s"]})]})}}]),n}(i.a.Component),S=(n(33),n(17)),M=function(e){var t=Object(r.useState)(window.navigator.onLine),n=Object(S.a)(t,2),i=n[0],a=n[1];return Object(r.useEffect)((function(){function e(){a(!0)}function t(){a(!1)}return window.addEventListener("online",e),window.addEventListener("offline",t),function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),Object(k.jsx)(k.Fragment,{children:!i&&e.children})},E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)(d.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsxs)("header",{children:[Object(k.jsxs)(j.a,{to:"/",children:["Recetas ",Object(k.jsx)(M,{children:"Offline"})]}),Object(k.jsx)(j.a,{to:"/timer",className:"timerLink",children:"\u23f1"})]}),Object(k.jsxs)("main",{children:[Object(k.jsx)(h.a,{exact:!0,path:"/",component:N}),Object(k.jsx)(h.a,{path:"/recipe/:recipeId",component:C}),Object(k.jsx)(h.a,{path:"/timer",component:I})]})]})})}}]),n}(i.a.Component),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(k.jsx)(E,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/platzi-recetas",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/platzi-recetas","/service-worker.js");T?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):W(e)}))}}()}},[[35,1,2]]]);
//# sourceMappingURL=main.df7caf2f.chunk.js.map